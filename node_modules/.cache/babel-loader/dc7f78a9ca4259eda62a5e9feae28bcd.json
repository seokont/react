{"ast":null,"code":"import _regeneratorRuntime from\"F:/PROJECTTEXASROOM/po/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/PROJECTTEXASROOM/po/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"F:/PROJECTTEXASROOM/po/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{getTokenPlayer,logoutPlayer}from\"../API/Api\";import Cookies from'universal-cookie';var ADD_TOKEN=\"ADD_TOKEN\";var PASSWORD_ERROR=\"PASSWORD_ERROR\";var LOGIN_ERROR=\"LOGIN_ERROR\";var cookies=new Cookies();var initialization={Token:cookies.get('Token')==undefined?'':cookies.get('Token'),Password:'',Login:''};var TokenReducer=function TokenReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialization;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_TOKEN:return _objectSpread(_objectSpread({},state),{},{Token:action.token});case PASSWORD_ERROR:return _objectSpread(_objectSpread({},state),{},{Password:action.token});case LOGIN_ERROR:return _objectSpread(_objectSpread({},state),{},{Login:action.token});default:return state;}};export var addPlayerToken=function addPlayerToken(token){return{type:ADD_TOKEN,token:token};};export var loginError=function loginError(token){return{type:LOGIN_ERROR,token:token};};export var passwordError=function passwordError(token){return{type:PASSWORD_ERROR,token:token};};export var addPlayerTokenThunk=function addPlayerTokenThunk(args){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getTokenPlayer.getPlayerToken(args);case 2:response=_context.sent;if(response.data==='Login Error'){dispatch(loginError(response.data));}if(response.data==='Password Error'){dispatch(passwordError(response.data));}if(response.data!=='Login Error'&&response.data!=='Password Error'&&response.data!==''){dispatch(addPlayerToken(response.data));cookies.set('Token',response.data,{path:'/'});// localStorage.setItem(\"token\", response.data);\n}case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};// export const addLocalStorageTokenThunk = (token) =>\n//     (dispatch) => {\n//\n//         dispatch(addPlayerToken(token));\n//\n//\n//     }\nexport var logoutThunk=function logoutThunk(args){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return logoutPlayer.logoutPlayerAdd(args);case 2:response=_context2.sent;if(response.data.Result==='Ok'){dispatch(addPlayerToken(''));// localStorage.setItem(\"token\", '');\ncookies.remove('Token',{path:'/'});}if(response.data.Result===\"Error\"){dispatch(addPlayerToken(''));// localStorage.setItem(\"token\", '');\ncookies.remove('Token',{path:'/'});}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export default TokenReducer;","map":{"version":3,"sources":["F:/PROJECTTEXASROOM/po/src/Reducer/auth-reducer.js"],"names":["getTokenPlayer","logoutPlayer","Cookies","ADD_TOKEN","PASSWORD_ERROR","LOGIN_ERROR","cookies","initialization","Token","get","undefined","Password","Login","TokenReducer","state","action","type","token","addPlayerToken","loginError","passwordError","addPlayerTokenThunk","args","dispatch","getPlayerToken","response","data","set","path","logoutThunk","logoutPlayerAdd","Result","remove"],"mappings":"maAAA,OAAQA,cAAR,CAAwBC,YAAxB,KAA2C,YAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CAEA,GAAMC,CAAAA,SAAS,CAAG,WAAlB,CACA,GAAMC,CAAAA,cAAc,CAAG,gBAAvB,CACA,GAAMC,CAAAA,WAAW,CAAG,aAApB,CAEA,GAAMC,CAAAA,OAAO,CAAG,GAAIJ,CAAAA,OAAJ,EAAhB,CAEA,GAAIK,CAAAA,cAAc,CAAG,CAGjBC,KAAK,CAAEF,OAAO,CAACG,GAAR,CAAY,OAAZ,GAAwBC,SAAxB,CAAoC,EAApC,CAAyCJ,OAAO,CAACG,GAAR,CAAY,OAAZ,CAH/B,CAIjBE,QAAQ,CAAE,EAJO,CAKjBC,KAAK,CAAE,EALU,CAArB,CAQA,GAAIC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAoC,IAAnCC,CAAAA,KAAmC,2DAA3BP,cAA2B,IAAXQ,CAAAA,MAAW,2CACnD,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKb,CAAAA,SAAL,CACI,sCACOW,KADP,MAEIN,KAAK,CAAEO,MAAM,CAACE,KAFlB,GAIJ,IAAKb,CAAAA,cAAL,CACI,sCAEOU,KAFP,MAGIH,QAAQ,CAAEI,MAAM,CAACE,KAHrB,GAKJ,IAAKZ,CAAAA,WAAL,CACI,sCAEOS,KAFP,MAGIF,KAAK,CAAEG,MAAM,CAACE,KAHlB,GAMJ,QACI,MAAOH,CAAAA,KAAP,CApBR,CAsBH,CAvBD,CAyBA,MAAO,IAAII,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACD,KAAD,QAAY,CAACD,IAAI,CAAEb,SAAP,CAAkBc,KAAK,CAALA,KAAlB,CAAZ,EAArB,CACP,MAAO,IAAIE,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACF,KAAD,QAAY,CAACD,IAAI,CAAEX,WAAP,CAAoBY,KAAK,CAALA,KAApB,CAAZ,EAAjB,CACP,MAAO,IAAIG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACH,KAAD,QAAY,CAACD,IAAI,CAAEZ,cAAP,CAAuBa,KAAK,CAALA,KAAvB,CAAZ,EAApB,CAGP,MAAO,IAAMI,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,IAAD,iGAC/B,iBAAOC,QAAP,qJACyBvB,CAAAA,cAAc,CAACwB,cAAf,CAA8BF,IAA9B,CADzB,QACQG,QADR,eAEI,GAAIA,QAAQ,CAACC,IAAT,GAAkB,aAAtB,CAAqC,CACjCH,QAAQ,CAACJ,UAAU,CAACM,QAAQ,CAACC,IAAV,CAAX,CAAR,CACH,CAED,GAAID,QAAQ,CAACC,IAAT,GAAkB,gBAAtB,CAAwC,CACpCH,QAAQ,CAACH,aAAa,CAACK,QAAQ,CAACC,IAAV,CAAd,CAAR,CACH,CAED,GAAID,QAAQ,CAACC,IAAT,GAAkB,aAAlB,EAAmCD,QAAQ,CAACC,IAAT,GAAkB,gBAArD,EAAyED,QAAQ,CAACC,IAAT,GAAkB,EAA/F,CAAmG,CAC/FH,QAAQ,CAACL,cAAc,CAACO,QAAQ,CAACC,IAAV,CAAf,CAAR,CACApB,OAAO,CAACqB,GAAR,CAAY,OAAZ,CAAqBF,QAAQ,CAACC,IAA9B,CAAoC,CAACE,IAAI,CAAE,GAAP,CAApC,EACA;AAEH,CAfL,sDAD+B,gEAA5B,CAqBP;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACP,IAAD,kGAEvB,kBAAOC,QAAP,0JAEyBtB,CAAAA,YAAY,CAAC6B,eAAb,CAA6BR,IAA7B,CAFzB,QAEQG,QAFR,gBAKI,GAAIA,QAAQ,CAACC,IAAT,CAAcK,MAAd,GAAyB,IAA7B,CAAmC,CAC/BR,QAAQ,CAACL,cAAc,CAAC,EAAD,CAAf,CAAR,CACA;AACAZ,OAAO,CAAC0B,MAAR,CAAe,OAAf,CAAwB,CAACJ,IAAI,CAAE,GAAP,CAAxB,EACH,CAED,GAAIH,QAAQ,CAACC,IAAT,CAAcK,MAAd,GAAyB,OAA7B,CAAsC,CAClCR,QAAQ,CAACL,cAAc,CAAC,EAAD,CAAf,CAAR,CACA;AACAZ,OAAO,CAAC0B,MAAR,CAAe,OAAf,CAAwB,CAACJ,IAAI,CAAE,GAAP,CAAxB,EAEH,CAhBL,wDAFuB,kEAApB,CAuBP,cAAef,CAAAA,YAAf","sourcesContent":["import {getTokenPlayer, logoutPlayer} from \"../API/Api\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nconst ADD_TOKEN = \"ADD_TOKEN\";\r\nconst PASSWORD_ERROR = \"PASSWORD_ERROR\";\r\nconst LOGIN_ERROR = \"LOGIN_ERROR\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nlet initialization = {\r\n\r\n\r\n    Token: cookies.get('Token') == undefined ? '' : cookies.get('Token'),\r\n    Password: '',\r\n    Login: '',\r\n};\r\n\r\nlet TokenReducer = (state = initialization, action) => {\r\n    switch (action.type) {\r\n        case ADD_TOKEN:\r\n            return {\r\n                ...state,\r\n                Token: action.token\r\n            };\r\n        case PASSWORD_ERROR:\r\n            return {\r\n\r\n                ...state,\r\n                Password: action.token\r\n            };\r\n        case LOGIN_ERROR:\r\n            return {\r\n\r\n                ...state,\r\n                Login: action.token\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport let addPlayerToken = (token) => ({type: ADD_TOKEN, token});\r\nexport let loginError = (token) => ({type: LOGIN_ERROR, token});\r\nexport let passwordError = (token) => ({type: PASSWORD_ERROR, token});\r\n\r\n\r\nexport const addPlayerTokenThunk = (args) =>\r\n    async (dispatch) => {\r\n        let response = await getTokenPlayer.getPlayerToken(args);\r\n        if (response.data === 'Login Error') {\r\n            dispatch(loginError(response.data))\r\n        }\r\n\r\n        if (response.data === 'Password Error') {\r\n            dispatch(passwordError(response.data))\r\n        }\r\n\r\n        if (response.data !== 'Login Error' && response.data !== 'Password Error' && response.data !== '') {\r\n            dispatch(addPlayerToken(response.data));\r\n            cookies.set('Token', response.data, {path: '/'});\r\n            // localStorage.setItem(\"token\", response.data);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n// export const addLocalStorageTokenThunk = (token) =>\r\n//     (dispatch) => {\r\n//\r\n//         dispatch(addPlayerToken(token));\r\n//\r\n//\r\n//     }\r\n\r\n\r\nexport const logoutThunk = (args) =>\r\n\r\n    async (dispatch) => {\r\n\r\n        let response = await logoutPlayer.logoutPlayerAdd(args);\r\n\r\n\r\n        if (response.data.Result === 'Ok') {\r\n            dispatch(addPlayerToken(''));\r\n            // localStorage.setItem(\"token\", '');\r\n            cookies.remove('Token', {path: '/'})\r\n        }\r\n\r\n        if (response.data.Result === \"Error\") {\r\n            dispatch(addPlayerToken(''));\r\n            // localStorage.setItem(\"token\", '');\r\n            cookies.remove('Token', {path: '/'})\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\nexport default TokenReducer;\r\n"]},"metadata":{},"sourceType":"module"}